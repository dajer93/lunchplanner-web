(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{722:(e,n,t)=>{"use strict";t.d(n,{R2:()=>o,a7:()=>h,cQ:()=>c,gw:()=>d});let a="lunchplanner_token",i=()=>localStorage.getItem(a),s=e=>{localStorage.setItem(a,e)},r=()=>{localStorage.removeItem(a)},l=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=i(),a={"Content-Type":"application/json",...t?{Authorization:"Bearer ".concat(t)}:{},...n.headers||{}},s=await fetch("".concat("http://localhost:3000/api").concat(e),{...n,headers:a});if(401===s.status)throw r(),window.location.href="/login",Error("Unauthorized");let l=await s.json();if(!s.ok)throw Error(l.message||"API request failed");return l},o={register:async(e,n,t)=>{let a=await l("/auth/register",{method:"POST",body:JSON.stringify({name:e,email:n,password:t})});return a.token&&s(a.token),a},login:async(e,n)=>{let t=await l("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:n})});return t.token&&s(t.token),t},logout:()=>{r()},getCurrentUser:async()=>await l("/auth/me"),changePassword:async(e,n)=>await l("/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:e,newPassword:n})})},c={getAll:async()=>await l("/ingredients"),getById:async e=>await l("/ingredients/".concat(e)),create:async e=>await l("/ingredients",{method:"POST",body:JSON.stringify({name:e})}),update:async(e,n)=>await l("/ingredients/".concat(e),{method:"PUT",body:JSON.stringify({name:n})}),delete:async e=>await l("/ingredients/".concat(e),{method:"DELETE"})},d={getAll:async()=>await l("/meals"),getById:async e=>await l("/meals/".concat(e)),create:async(e,n)=>await l("/meals",{method:"POST",body:JSON.stringify({title:e,ingredients:n})}),update:async(e,n,t)=>await l("/meals/".concat(e),{method:"PUT",body:JSON.stringify({title:n,ingredients:t})}),delete:async e=>await l("/meals/".concat(e),{method:"DELETE"})},h={getAll:async()=>await l("/plans"),updateDay:async(e,n)=>await l("/plans/".concat(e),{method:"PUT",body:JSON.stringify({mealIds:n})}),reset:async()=>await l("/plans",{method:"DELETE"}),getShoppingList:async()=>await l("/plans/shopping-list")}},1980:(e,n,t)=>{Promise.resolve().then(t.bind(t,3792))},3792:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>c});var a=t(5155),i=t(2115),s=t(6874),r=t.n(s),l=t(7153),o=t(722);function c(){let[e,n]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{try{let e=await o.R2.getCurrentUser();n(e.user.name)}catch(e){console.error("Error fetching user data:",e)}})()},[]),(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{children:["Welcome, ",e||"User","!"]}),(0,a.jsx)("p",{className:"mb-4",children:"This is your personal lunch planning application."}),(0,a.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem",marginTop:"2rem"},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{children:"Ingredients"}),(0,a.jsx)("p",{children:"Manage your ingredient database."}),(0,a.jsx)(r(),{href:"/ingredients",children:(0,a.jsx)("button",{style:{width:"100%",marginTop:"1rem"},children:"Go to Ingredients"})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{children:"Meals"}),(0,a.jsx)("p",{children:"Create and manage your meal recipes."}),(0,a.jsx)(r(),{href:"/meals",children:(0,a.jsx)("button",{style:{width:"100%",marginTop:"1rem"},children:"Go to Meals"})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{children:"Meal Plan"}),(0,a.jsx)("p",{children:"Plan your meals for the week."}),(0,a.jsx)(r(),{href:"/plan",children:(0,a.jsx)("button",{style:{width:"100%",marginTop:"1rem"},children:"Go to Meal Plan"})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{children:"Shopping List"}),(0,a.jsx)("p",{children:"Generate a shopping list from your meal plan."}),(0,a.jsx)(r(),{href:"/shopping-list",children:(0,a.jsx)("button",{style:{width:"100%",marginTop:"1rem"},children:"Go to Shopping List"})})]})]})]})})}},7153:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var a=t(5155),i=t(6874),s=t.n(i),r=t(5695),l=t(722);function o(){let e=(0,r.usePathname)();return(0,a.jsx)("header",{className:"p-4",style:{backgroundColor:"white",borderBottom:"1px solid var(--border-color)"},children:(0,a.jsxs)("div",{className:"container flex justify-between items-center",children:[(0,a.jsx)("h1",{style:{margin:0,fontSize:"1.5rem"},children:"\uD83C\uDF7D️ Lunch Planner"}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{className:"flex gap-4",style:{listStyle:"none",margin:0},children:[(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/",style:{fontWeight:"/"===e?"bold":"normal",textDecoration:"/"===e?"underline":"none"},children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/ingredients",style:{fontWeight:"/ingredients"===e?"bold":"normal",textDecoration:"/ingredients"===e?"underline":"none"},children:"Ingredients"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/meals",style:{fontWeight:"/meals"===e?"bold":"normal",textDecoration:"/meals"===e?"underline":"none"},children:"Meals"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/plan",style:{fontWeight:"/plan"===e?"bold":"normal",textDecoration:"/plan"===e?"underline":"none"},children:"Meal Plan"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/shopping-list",style:{fontWeight:"/shopping-list"===e?"bold":"normal",textDecoration:"/shopping-list"===e?"underline":"none"},children:"Shopping List"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{l.R2.logout(),window.location.href="/login"},className:"link-button",children:"Logout"})})]})})]})})}var c=t(2115);function d(e){let{children:n}=e,[t,i]=(0,c.useState)(!0),s=(0,r.useRouter)();return((0,c.useEffect)(()=>{(async()=>{try{await l.R2.getCurrentUser(),i(!1)}catch(e){s.push("/login")}})()},[s]),t)?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)("p",{children:"Loading..."})}):(0,a.jsx)(a.Fragment,{children:n})}function h(e){let{children:n}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{}),(0,a.jsx)("main",{className:"container p-4",children:n})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[244,441,684,358],()=>n(1980)),_N_E=e.O()}]);